# As You Plugin - Development Tools

[tools]
python = "3.13.11"    # Python 3.11+ required (using latest stable)
ruff = "0.14.10"      # Python linter and formatter
rust = "1.92.0"       # Rust toolchain for future MCP development

[tasks.test]
description = "Run all Python doctests"
run = "python3 tests/run_doctests.py"

[tasks."test:verbose"]
description = "Run Python doctests with verbose output"
run = "python3 tests/run_doctests.py -v"

[tasks."test:watch"]
description = "Run tests in watch mode"
run = """
while true; do
  clear
  echo "Running tests..."
  python3 tests/run_doctests.py
  echo ""
  echo "Waiting for changes... (Ctrl+C to exit)"
  sleep 5
done
"""

[tasks.lint]
description = "Lint Python code with ruff"
run = "ruff check scripts/*.py"

[tasks.format]
description = "Format Python code with ruff"
run = "ruff format scripts/*.py"

[tasks."format:check"]
description = "Check Python formatting without writing"
run = "ruff format --check scripts/*.py"

[tasks.validate]
description = "Validate plugin configuration files"
run = """
echo "Validating plugin.json..."
python3 -c "import json; json.load(open('.claude-plugin/plugin.json'))" && echo "✓ plugin.json is valid"

echo "Validating hooks.json..."
python3 -c "import json; json.load(open('hooks/hooks.json'))" && echo "✓ hooks.json is valid"

echo "✓ All configuration files are valid"
"""

[tasks."scoring:calculate"]
description = "Calculate all scores (TF-IDF, PMI, time decay, composite)"
run = "python3 scripts/score_calculator.py"

# Note: Individual scoring tasks (tfidf, pmi, decay, composite) have been unified
# into a single Python implementation (score_calculator.py)
#
# Other scoring and pattern tasks are available as slash commands:
#   /as-you:show-scores
#   /as-you:detect-similar-patterns
#   /as-you:merge-patterns
#   (pattern promotion is automatically executed by promote commands)
